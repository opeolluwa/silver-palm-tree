import{u as c,E as h,G as d,H as a,b as n}from"./index.ad596797.js";const i=c(),s=h(),u=d("todoStore",{state:()=>({todoArray:null,noOfRows:10,pageIndex:1,isLoading:!1,isFetchingTodoArray:!1,errorFetchingTodo:!1,errorMessage:""}),getters:{getAllTodo:t=>t.todoArray,async getAuthToken(t){const e=await a("authorizationToken");return s.getAuthToken||e}},actions:{async fetchAllTodo(){this.isFetchingTodoArray=!0;const t=s.getAuthToken?s.getAuthToken:await a("authorizationToken");try{const{data:e}=await n.get("/todo",{headers:{Authorization:`Bearer ${t}`}});this.todoArray=e.data.todo,this.noOfRows=e.data.noOfRows,this.pageIndex=e.DataTransfer.CurrentPage,this.isFetchingTodoArray=!1,console.log(JSON.stringify(e))}catch{this.isFetchingTodoArray=!1}},async createTodo(t){const e=s.getAuthToken?s.getAuthToken:await a("authorizationToken");this.isLoading=!0;try{const o=t.priority.split(" ").join("-")||t.priority,{data:r}=await n.post("/todo",{...t,priority:o},{headers:{Authorization:`Bearer ${e}`}});return r.success?(this.fetchAllTodo(),this.isLoading=!1,t.title="",t.description="",i.success(r.message),!0):!1}catch(o){this.errorFetchingTodo=!0,this.isLoading=!1;const{data:r}=o.response;r.success||i.error(r.message)}return this.isLoading=!1,!1},async deleteTodo(t){try{const e=s.getAuthToken?s.getAuthToken:await a("authorizationToken"),{data:o}=await n.delete(`/todo/${t}`,{headers:{Authorization:`Bearer ${e}`}});o.success&&(this.fetchAllTodo(),i.success(o.message)),console.log("the todo id is ",t),console.log(JSON.stringify(o))}catch(e){const{data:o}=e.response;o.success||i.error(o.message)}}}});export{u};
